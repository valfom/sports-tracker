<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Graphs</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <script language="javascript" type="text/javascript" src="jquery.js"></script>
    <script language="javascript" type="text/javascript" src="jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="jquery.flot.time.js"></script>
    <style type="text/css">
    html, body {
        height: 100%;
    }
    </style>
 </head>
    <body>

    <div id="placeholder" style="width:100%;height:70%;"></div>
    
    <form align="center">
		<input id="cbSpeed" type="checkbox" name="graph" value="Speed" checked>Speed
		<input id="cbAltitude" type="checkbox" name="graph" value="Altitude" checked>Altitude 
	</form>

<script type="text/javascript">

var speedData, altitudeData;

$(function () {

	 $("#cbSpeed").change(function () {
	 
    		drawGraphs($('#cbSpeed').is(':checked'), $('#cbAltitude').is(':checked'));
	});
		
		$("#cbAltitude").change(function () {
        
    		drawGraphs($('#cbSpeed').is(':checked'), $('#cbAltitude').is(':checked'));
		});
});

function drawGraphs(drawSpeed, drawAltitude) {
    
    	var data;
    
    	if (drawSpeed && drawAltitude) {
    	
    		data = [ { data: speedData, label: "Speed", lines: { show: true, lineWidth: 2 }, shadowSize: 1 },
	         { data: altitudeData, label: "Altitude", yaxis: 2, lines: { show: true, lineWidth: 2 }, shadowSize: 1 }];
	         
    	} else if (drawSpeed) {
    	
    		data = [ { data: speedData, label: "Speed" } ];
    	
    	} else if (drawAltitude) {
    	
    		data = [ { data: altitudeData, label: "Altitude", yaxis: 2 }];
    		
    	} else {
    	
    		data = [];
    	}
    
    	$.plot($("#placeholder"),
	       data,
	       { 
	           xaxes: [ { min: 0 } ],
	           yaxes: [ { min: 0 },
	                    {
	                      alignTicksWithAxis: 2,
	                      position: "right"
	                    } ],
	           legend: { position: 'ne' },
	           colors: ["#FF3333", "#0099FF"],
	           zoom: {interactive: true}, pan: {interactive: true}
	       });
	 }

function setGraphData(spData, altData) {
	
	speedData = spData;
	altitudeData = altData;
	
	drawGraphs($('#cbSpeed').is(':checked'), $('#cbAltitude').is(':checked'));
}
	
</script>
 </body>
</html>